# ZHOUYI

```
   ███████╗  ██╗  ██╗   ██████╗   ██╗   ██╗ ██╗   ██╗ ██╗
   ╚══███╔╝  ██║  ██║  ██╔═══██╗  ██║   ██║ ╚██╗ ██╔╝ ██║
     ███╔╝   ███████║  ██║   ██║  ██║   ██║  ╚████╔╝  ██║
    ███╔╝    ██╔══██║  ██║   ██║  ██║   ██║   ╚██╔╝   ██║
   ███████╗  ██║  ██║  ╚██████╔╝  ╚██████╔╝    ██║    ██║
   ╚══════╝  ╚═╝  ╚═╝   ╚═════╝   ╚═════╝     ╚═╝    ╚═╝

   ☰ 乾  ☱ 兑  ☲ 离  ☳ 震  ☴ 巽  ☵ 坎  ☶ 艮  ☷ 坤
```

基于传统易学规则的周易占卜命令行工具。

## 快速开始

```bash
npm install
npm start
```

## 占卜之道

> 「易有太极，是生两仪，两仪生四象，四象生八卦。」 ——《周易·系辞上传》

### 何时该占

古人以"三不占"为规矩：

> 「不诚不占，不义不占，不疑不占。」 ——《易学启蒙》

| 原则 | 含义 | 反例 |
|------|------|------|
| **不诚不占** | 心不静、态度不诚恳则不占 | 无聊消遣、对结果不满反复占问 |
| **不义不占** | 违背道义之事不占 | 问损人利己之事能否得逞 |
| **不疑不占** | 心中已有定论则无需占 | 明知该做什么还来求卦 |

**同一件事只占一次。** 朱熹《周易本义·筮仪》载："再三渎，渎则不告"——反复求占，是对卦的亵渎，此时卦象不再灵验。

占卜适合：面对一件具体的事，确实拿不准，想借助卦象整理思路。

### 三种方法，各有其用

> 「大衍之数五十，其用四十有九。分而为二以象两，挂一以象三，揲之以四以象四时。」 ——《周易·系辞上传》

#### 大衍筮法 — 古法正统，问大事

模拟49根蓍草经十八变成卦。概率分布不对称：老阳(9)概率是老阴(6)的三倍，体现了"阳主动、阴主静"的哲学设计。

> 「蓍之德圆而神，卦之德方以知。」 ——《周易·系辞上传》

蓍草占法在《左传》《国语》中多有记载，是先秦正式占筮所用之法。**适合正式、慎重的占问——人生重大抉择、事业方向。**

#### 铜钱法 — 万能通用，问日常

模拟三枚铜钱投掷六次。阴阳变化概率对称（老阳、老阴各1/8）。与纳甲六爻体系（六亲、六神、世应、空亡）配合最为完善，是宋代以后最广泛使用的占法。

> 「以钱代蓍，自汉始也。」 ——（清）纪昀《四库全书总目提要》

**适合日常具体问题——工作机会、合作关系、出行吉凶。** 不确定选哪种方法时，选铜钱法即可。

#### 梅花易数 — 灵感速断，随感而占

相传为北宋邵雍（邵康节）所创。核心理念是"万物皆有数"，以体用五行生克为断卦核心，固定一个动爻。

> 「一物从来有一身，一身还有一乾坤。能知万物备于我，肯把三才别立根。」 ——（宋）邵雍《皇极经世》

起卦不限于数字——门牌、车牌、笔画、时辰，万物皆可取数。**适合灵感触发的时刻——忽有所感、随见取象、不期而占。**

#### 速查

| | 大衍筮法 | 铜钱法 | 梅花易数 |
|---|---------|--------|---------|
| **一句话** | 古法正统 | 万能通用 | 灵感速断 |
| **态度** | 焚香净手 | 正常认真 | 随缘触发 |
| **适合问** | 重大抉择 | 任何具体事 | 随感而占 |
| **断法核心** | 卦辞爻辞 | 六亲世应 | 体用生克 |
| **变爻** | 0-6个，阳动偏多 | 0-6个，阴阳对称 | 固定1个 |
| **典出** | 《周易·系辞传》 | 汉代以钱代蓍 | （宋）邵雍 |

## 技术实现

### 装卦分析

- **纳甲** — 按八宫纳甲法为六爻配天干地支
- **六亲** — 根据宫的五行与爻的五行生克关系推导（父母/兄弟/子孙/妻财/官鬼）
- **六神** — 根据日干配青龙/朱雀/勾陈/螣蛇/白虎/玄武
- **世应** — 从六十四卦数据库中查取世爻和应爻位置
- **空亡** — 根据日干支所在旬判定空亡地支
- **日干支自动计算** — 根据当前日期自动推算壬戌日等干支信息，无需手动输入

### 断卦规则

根据变爻数量（0-6个）自动选择解读方式：

| 变爻数 | 规则 |
|--------|------|
| 0 | 以本卦卦辞断 |
| 1 | 以本卦变爻爻辞断 |
| 2 | 以本卦两变爻爻辞断，上爻为主 |
| 3 | 本卦卦辞与之卦卦辞参看，以本卦为主 |
| 4 | 以之卦不变爻爻辞断 |
| 5 | 以之卦不变爻爻辞断 |
| 6 | 乾坤用用九/用六，其余以之卦卦辞断 |

### 六十四卦数据库

- 64卦完整数据，按八宫组织
- 每卦含卦辞、大象传、6条爻辞（原文+白话翻译）
- 二进制编码、Unicode卦符、世应爻位、宫内序号

## 项目结构

```
src/
  types.ts              # 核心类型定义
  core/
    divination.ts       # 起卦算法（大衍/铜钱/梅花）
    analysis.ts         # 装卦分析引擎
    calendar.ts         # 干支历计算
  data/
    trigrams.ts         # 八卦数据与纳甲表
    hexagrams.ts        # 六十四卦汇总与索引
    palace-*.ts         # 八宫卦数据（乾坤坎离震巽艮兑）
  cli/
    main.ts             # 命令行交互界面
  test-quick.ts         # 功能验证脚本
research/               # 调研文档（理论/方法/解读/设计讨论）
```

## 免责声明

**本软件仅供学术研究、传统文化学习和个人兴趣探索之用。**

- 本系统的占卜结果基于传统易学规则的程序化实现，不具备任何预测未来的能力
- 占卜结果**不构成**任何医疗、法律、财务、投资或其他专业建议
- 请**勿**将占卜结果作为重要人生决策的依据
- 任何因使用本软件产生的后果，开发者不承担任何责任
- 传统易学是中国古代哲学思想的重要组成部分，本项目旨在以现代技术手段保存和展示这一文化遗产

> 「善易者不占。」 ——《荀子·大略》

> 「易，穷则变，变则通，通则久。」 ——《周易·系辞下传》

> 「作易者，其有忧患乎？」 ——《周易·系辞下传》

《易经》的真正价值在于其哲学智慧——穷则变、变则通的变化观，刚柔相推、物极必反的辩证法，自强不息、厚德载物的人生态度——而非占卜预测本身。

## License

[MIT](LICENSE)
